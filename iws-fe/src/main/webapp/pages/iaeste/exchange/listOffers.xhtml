<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/pages/templates/iaeste.xhtml">
    <ui:param name="title" value="#{amsg.listOfOffersHeader}"/>
    <ui:define name="content">
        <h:form id="form">

            <h:panelGrid columns="2" style="float: right; margin-right: 60px">

                <p:outputLabel for="tableView" value="#{amsg.selectTableView}"/>

                <p:selectOneButton id="tableView" value="#{offerBean.emptyOffer.selectedTableView}">
                    <f:selectItems id="selectedTableView" value="#{offerBean.tableViews}" var="p" itemLabel="#{amsg.handleGetObject(p.nameProperty)}"/>
                    <p:ajax event="change" process="@this" update="listOfOffers"/>
                </p:selectOneButton>

            </h:panelGrid>

            <p:dataTable id="listOfOffers" var="offer" value="#{offerBean.offerList}" emptyMessage="#{amsg.offerNotFound}" paginator="true" lazy="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="20,50,100" rows="20" rowKey="#{offer.refNo}" selection="#{offerBean.selectedOffer}" selectionMode="single" >

                <f:facet name="header">
                    <h:outputText value="#{amsg.viewOfferTableHeader}"/>
                </f:facet>

                <p:column headerText="#{amsg.refNo}">
                    <h:outputText value="#{offer.refNo}"/>
                </p:column>

                <p:column headerText="#{amsg.nominationDeadline}"
                          rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED' || offerBean.emptyOffer.selectedTableView == 'COMPACT'}">
                    <h:outputText value="#{offer.changeDateFormat(offer.nominationDeadline)}"/>
                </p:column>

                <p:column headerText="#{amsg.employer}"
                          rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED' || offerBean.emptyOffer.selectedTableView == 'COMPACT'}">
                    <h:outputText value="#{offer.employer.name}"/>
                </p:column>

                <p:column headerText="#{amsg.weeksOffered}"
                          rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED'}">
                    <h:outputText value="#{offer.minNumberOfWeeksOffered}-#{offer.maxNumberOfWeeksOffered}"/>
                </p:column>

                <p:column headerText="#{amsg.grossPay}"
                          rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED'}">
                    <h:outputText value="#{offer.grossPay}"/>
                </p:column>

                <p:column headerText="#{amsg.fieldsOfStudy}">
                    <h:outputText value="#{offer.faculty}"/>
                </p:column>

                <p:column headerText="#{amsg.specialization}"
                          rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED' || offerBean.emptyOffer.selectedTableView == 'COMPACT'}">
                    <h:outputText value="#{offer.specialization}"/>
                </p:column>

                <p:column headerText="#{amsg.studyLevel}" rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED'}">
                    <h:outputText value="#{offer.selectedLevelOfStudy}"/>
                </p:column>

                <p:column headerText="#{amsg.gender}" rendered="#{offerBean.emptyOffer.selectedTableView == 'DETAILED'}">
                    <h:outputText value="#{amsg.handleGetObject(offer.selectedGender.class.simpleName.concat('.').concat(offer.selectedGender.name()))}"/>
                </p:column>

                <f:facet name="footer">
                    <p:commandButton id="viewOffer" value="View" icon="ui-icon-search" action="offerDetail.xhtml?faces-redirect=true"/>
                    <p:commandButton id="editOffer" value="#{amsg.editOfferHeader}" icon="ui-icon-folder-open"
                                     action="/pages/iaeste/exchange/editOffer.xhtml?faces-redirect=true"/>
                    <p:commandButton id="addOffer" value="#{amsg.addOFormButton}" icon="ui-icon-folder-open"
                                     action="addOffer.xhtml?faces-redirect=true"/>
                </f:facet>

            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>
</html>