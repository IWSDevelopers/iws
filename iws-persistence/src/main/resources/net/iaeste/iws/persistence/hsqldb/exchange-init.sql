-- Please add the initialization of all Exchange related tables here
-- Note; The HSQLDB is for in-memory testing, hence it makes no sense to have
--  drop the tables and sequences first!

CREATE TABLE offers (
    id                        bigint generated by default as identity (start with 1),
    ref_no                    varchar(255)  NOT NULL  CHECK(length(ref_no) > 0),
    canteen                   boolean,
    currency                  varchar(3),
    weekly_hours              decimal(5,3)  NOT NULL,
    daily_hours               decimal(5,3),
    deduction                 numeric(2,0),
    employer_name             varchar(255)  NOT NULL  CHECK(length(employer_name) > 0),
    employer_address          varchar(255),
    employer_address_2        varchar(255),
    employer_business         varchar(255),
    employer_employees_cnt    integer,
    employer_website          varchar(255),
    from_date                 date          NOT NULL,
    to_date                   date          NOT NULL,
    from_date_2               date,
    to_date_2                 date,
    unavailable_from          date,
    unavailable_to            date,
    language_1                varchar(255)  NOT NULL,
    language_1_level          varchar(1)    NOT NULL,
    language_1_op             varchar(1),
    language_2                varchar(255),
    language_2_level          varchar(1),
    language_2_op             varchar(1),
    language_3                varchar(255),
    language_3_level          varchar(1),
    living_cost               decimal(12,2),
    living_cost_frequency     integer,
    lodging_by                varchar(255),
    lodging_cost              decimal(12,2),
    lodging_cost_frequency    integer,
    max_weeks                 integer       NOT NULL,
    min_weeks                 integer       NOT NULL,
    nearest_airport           varchar(255),
    nearest_pub_transport     varchar(255),
    nomination_deadline       date,
    other_requirements        varchar(500),
    payment                   decimal(12,2),
    payment_frequency         varchar(1),
    prev_training_req         boolean,
    work_description          varchar(1000) NOT NULL  CHECK(length(work_description) > 0),
    working_place             varchar(255),
    work_type                 char(4),
    study_levels              char(3)       NOT NULL  CHECK(length(study_levels) > 0),
    study_fields              varchar(1000) NOT NULL  CHECK(length(study_fields) > 0),
    specializations           varchar(1000),
    primary key (id),
    unique (ref_no),

    changed_on       TIMESTAMP DEFAULT NOW(),
    changed_by       INTEGER       NULL REFERENCES users (id) ON DELETE SET NULL,
    created_on       TIMESTAMP DEFAULT NOW(),
    created_by       INTEGER       NULL REFERENCES users (id) ON DELETE SET NULL
);